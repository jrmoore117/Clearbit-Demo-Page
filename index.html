<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Clearbit Demo Page</title>

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5L6MS49');</script>
  <!-- End Google Tag Manager -->

  <!-- Clearbit X -->
  <script>!function(w){var clearbit=w.clearbit=w.clearbit||[];if(!clearbit.initialize)if(clearbit.invoked)w.console&&console.error&&console.error("Clearbit snippet included twice.");else{clearbit.invoked=!0;clearbit.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];clearbit.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);clearbit.push(e);return clearbit}};for(var t=0;t<clearbit.methods.length;t++){var e=clearbit.methods[t];clearbit[e]=clearbit.factory(e)}clearbit.load=function(t){var e=document.createElement("script");e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"x.clearbitjs.com/v1/"+t+"/clearbit.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};clearbit.SNIPPET_VERSION="3.1.0";    clearbit.load("pk_4224c060bd62f460b5996f05586f0c30");    clearbit.page();  }}(window);</script>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

  <!-- Clearbit JS for HubSpot Form - Justin's Modified Version -->
  <script>
    !function (o) {
      var d = document,
        r = d.getElementsByTagName("script")[0];
      if ("object" == typeof o.ClearbitForHubspot) return console.log("Clearbit For HubSpot included more than once"), !1;
      o.ClearbitForHubspot = {},
        o.ClearbitForHubspot.forms = [],
        o.ClearbitForHubspot.addForm = function (r) {
          var t = r[0];
          "function" == typeof o.ClearbitForHubspot.onFormReady ? o.ClearbitForHubspot.onFormReady(t) : o.ClearbitForHubspot.forms.push(t)
        };
      var t = d.createElement("script");
      t.async = !0, t.src = "https://hubspot.clearbit.com/v1/forms/pk_4224c060bd62f460b5996f05586f0c30/forms.js",
        r.parentNode.insertBefore(t, r);
      o.addEventListener('message', function (e) {
        if (e.data.type === 'hsFormCallback' && e.data.eventName === 'onFormReady') {
          o.ClearbitForHubspot.addForm(d.querySelectorAll('[data-form-id="' + e.data.id + '"]'));
        }
      });
    }(window);
  </script>

</head>

<body>

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5L6MS49"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <h1>HubSpot Form Demo</h1>

  <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/shell.js"></script>
  <script>
    hbspt.forms.create({
      onFormReady: function ($form) { window.ClearbitForHubspot.addForm($form); },
      portalId: "6210573",
      formId: "bf718280-9759-4459-ad3f-05b8bea85bf1"
    });
  </script>

  <h1>Clearbit X Identify Form</h1>

  <form onsubmit="identify(event)">
    <input id="identifyEmail" type="text" placeholder="Email" />
    <input type="submit" />
  </form>

  <div id="onSubmitMessage"></div>

  <script>
    function identify(event) {
      event.preventDefault();
      const email = $("#identifyEmail").val();
      console.log(email);
      $("#onSubmitMessage").text(`${email} submitted!`);
      clearbit.identify(email, {
        "email": email,
        "customTraitTest": "Test",
      });
    }
  </script>

</body>

</html>