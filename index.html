<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Clearbit Demo Page</title>

  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5L6MS49');</script>
  <!-- End Google Tag Manager -->

  <!-- Tester Clearbit - Google Analytics -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    
    ga('create', 'UA-147051480-1', 'auto');
    ga('send', 'pageview');
    </script>

    <!-- Reveal - GA -->
    <script>
      ga(function(){
        ga_trackers=[];
        ga.getAll().forEach(function(x,i){
        ga_trackers.push(x.get('name'))});
        ga_trackers.forEach(
        function(gaName){
          ga(gaName + '.require', 'Clearbit', {"mapping":{
            "type":"dimension1",
            "companyName":"dimension2",
            "companyAnnualRevenue":"dimension15"}
          });
        });
      });
      </script>
      <script async src="https://ga.clearbit.com/v1/ga.js?authorization=pk_afe9704e931f9015969a925cecd1303a">
      </script>

  <!-- Segment Analytics.js -->
  <script>
    !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware"];analytics.factory=function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e);analytics.push(t);return analytics}};for(var e=0;e<analytics.methods.length;e++){var key=analytics.methods[e];analytics[key]=analytics.factory(key)}analytics.load=function(key,e){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.13.1";
    analytics.load("5NEQQtpLJxWQb1qfZOmG5Mkqy77jiQlw");
    analytics.page();
    }}();
  </script>

  <!-- Clearbit X - Personal Clearbit Account -->
  <script>!function(w){var clearbit=w.clearbit=w.clearbit||[];if(!clearbit.initialize)if(clearbit.invoked)w.console&&console.error&&console.error("Clearbit snippet included twice.");else{clearbit.invoked=!0;clearbit.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];clearbit.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);clearbit.push(e);return clearbit}};for(var t=0;t<clearbit.methods.length;t++){var e=clearbit.methods[t];clearbit[e]=clearbit.factory(e)}clearbit.load=function(t){var e=document.createElement("script");e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"x.clearbitjs.com/v1/"+t+"/clearbit.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};clearbit.SNIPPET_VERSION="3.1.0";    clearbit.load("pk_afe9704e931f9015969a925cecd1303a");    clearbit.page();  }}(window);</script>

  <!-- Clearbit X - GTM Internal
  <script>!function(w){var clearbit=w.clearbit=w.clearbit||[];if(!clearbit.initialize)if(clearbit.invoked)w.console&&console.error&&console.error("Clearbit snippet included twice.");else{clearbit.invoked=!0;clearbit.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","page","once","off","on"];clearbit.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);clearbit.push(e);return clearbit}};for(var t=0;t<clearbit.methods.length;t++){var e=clearbit.methods[t];clearbit[e]=clearbit.factory(e)}clearbit.load=function(t){var e=document.createElement("script");e.async=!0;e.src=("https:"===document.location.protocol?"https://":"http://")+"x.clearbitjs.com/v1/"+t+"/clearbit.min.js";var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)};clearbit.SNIPPET_VERSION="3.1.0";    clearbit.load("pk_4224c060bd62f460b5996f05586f0c30");    clearbit.page();  }}(window);</script> -->

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

  <!-- Clearbit JS for HubSpot Form - Justin's Modified Version -->
  <script>
    !function (o) {
      var d = document,
        r = d.getElementsByTagName("script")[0];
      if ("object" == typeof o.ClearbitForHubspot) return console.log("Clearbit For HubSpot included more than once"), !1;
      o.ClearbitForHubspot = {},
        o.ClearbitForHubspot.forms = [],
        o.ClearbitForHubspot.addForm = function (r) {
          var t = r[0];
          "function" == typeof o.ClearbitForHubspot.onFormReady ? o.ClearbitForHubspot.onFormReady(t) : o.ClearbitForHubspot.forms.push(t)
        };
      var t = d.createElement("script");
      t.async = !0, t.src = "https://hubspot.clearbit.com/v1/forms/pk_4224c060bd62f460b5996f05586f0c30/forms.js",
        r.parentNode.insertBefore(t, r);
      o.addEventListener('message', function (e) {
        if (e.data.type === 'hsFormCallback' && e.data.eventName === 'onFormReady') {
          o.ClearbitForHubspot.addForm(d.querySelectorAll('[data-form-id="' + e.data.id + '"]'));
        }
      });
    }(window);
  </script>

</head>

<body>

  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5L6MS49"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <h1>HubSpot Form</h1>

  <script charset="utf-8" type="text/javascript" src="//js.hsforms.net/forms/shell.js"></script>
  <script>
    hbspt.forms.create({
      onFormReady: function ($form) { window.ClearbitForHubspot.addForm($form); },
      portalId: "6210573",
      formId: "bf718280-9759-4459-ad3f-05b8bea85bf1"
    });
  </script>

  <h1>Clearbit X Identify Form</h1>

  <form onsubmit="identify(event)">
    <input id="identifyEmail" type="text" placeholder="Email" />
    <input type="submit" />
  </form>

  <div id="onSubmitMessage"></div>

  <script>
    function identify(event) {
      event.preventDefault();
      const email = $("#identifyEmail").val();
      console.log(email);
      $("#onSubmitMessage").text(`${email} submitted!`);
      clearbit.identify(email, {
        "email": email,
        "customTraitTest": "Test",
      });
    }
  </script>

  <h1>Marketo Form</h1>

  <script src="//app-ab32.marketo.com/js/forms2/js/forms2.min.js"></script>
  <form id="mktoForm_1282"></form>
  <script>MktoForms2.loadForm("//app-ab32.marketo.com", "797-LZE-483", 1282);</script>

  <script type="text/javascript">
    var pollForDefinition = function (scope, varname, callback) {
      if (typeof scope[varname] !== "undefined") {
        return callback();
      }
      var interval = setInterval(function () {
        if (typeof scope[varname] !== "undefined") {
          clearInterval(interval);
          callback();
        }
      }, 250);
    };
    var script = document.createElement("script");
    script.src = "https://marketo.clearbit.com/assets/v1/marketo/forms.js";
    script.async = true;
    script.setAttribute("data-clearbit-publishable-key", "pk_4224c060bd62f460b5996f05586f0c30");
    script.onerror = function (e) {
      console.log("Clearbit Form JS unable to load");
      pollForDefinition(window, "MktoForms2", function () {
        MktoForms2.whenReady(function (form) {
          form.setValues({ clearbitFormStatus: "Clearbit Form JS unable to load" });
        });
      });
    };
    document.body.appendChild(script);
  </script>

</body>

</html>